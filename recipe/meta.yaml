{% set version = "0.1.0" %}

package:
  name: u3d
  version: {{ version }}

source:
  fn: u3d-v{{ version }}.zip
  url: https://github.com/svn2github/MathGL/archive/9aae144.zip
  md5: 545ff4c21a6bdb919b6d2b4764298416

build:
  features:
  - vc9  # [win and py27]
  - vc10  # [win and py34]
  - vc14  # [win and py35]
  number: 1

requirements:
  build:
  - python  # [win]
  - cmake
  - jpeg  # [not win]
  - libpng  # [not win]
  - zlib  # [not win]
  run:
  - jpeg  # [not win]
  - libpng  # [not win]
  - zlib  # [not win]

test:
  requires:
  - python {{ environ['PY_VER'] + '*' }}  # [win]
  commands:
  # generate a test.idtf file. this tool never exit code 0 so we force it
  - IDTFGen || true  # [not win]
  - IDTFGen || ver>nul  # [win]
  # then try to generate a u3d file. this tool only exits 0 if it succeeds
  - IDTFConverter -input test.idtf -output test.u3d -debuglevel 0

about:
  home: https://github.com/ClinicalGraphics/u3d
  license: Apache-2.0
  summary: Universal 3D Sample Software
  
extra:
  recipe-maintainers:
    - ivoflipse
    - Korijn
    - Maxyme
    - EelcoHoogendoorn
